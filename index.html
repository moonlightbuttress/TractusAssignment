<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href = "style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <title>Tractus Assignment</title>
</head>
<body>

    <label for="nJokes">Enter a number of jokes between 1 and 10</label>
    <input type="number" id = "nJokes" ><br><br>
    <button type="button" id = "submit" >Submit</button>
    <p>
        <div style="display: none">
                <h1 id="joke">CLICK FOR A NEW JOKE</h1>
                <button type = "button" id = "generate"> Generate Joke</button>
        </div>
    </p>

<script>
    let jokes = [];

    $(document).ready(function() {
        let numJokes = 0;
        let p = $("p");
        p.empty();
        $("#submit").click(function () {
            p.empty();
            numJokes = $("#nJokes").val();
            if (numJokes > 10){
                alert("Too many jokes!")
            }else if(numJokes < 0){
                alert("Too few jokes!")
            }else {
                let base = $("div");
                let copy = base.clone();
                for (let i = 0; i < numJokes; ++i){
                    $("p").append(copy);
                    copy.children($("#generate")).on("click", function () {
                        console.log("clicked");
                        $.getJSON("https://icanhazdadjoke.com/", "USER-AGENT: LEARNING JQUERY", function (data) {
                            let joke = copy.children($("#joke"));
                            joke.text(data.joke);
                        });
                    });
                    copy.css("display", "inline-block");
                }
            }

        })

    });

</script>
</body>
</html>